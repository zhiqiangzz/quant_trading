import pandas as pd


UP_TH = 0.60
DN_TH = 0.40

trading_date_list_str = [
    "2025-01-02",
    "2025-01-03",
    "2025-01-06",
    "2025-01-07",
    "2025-01-08",
    "2025-01-09",
    "2025-01-10",
    "2025-01-13",
    "2025-01-14",
    "2025-01-15",
    "2025-01-16",
    "2025-01-17",
    "2025-01-20",
    "2025-01-21",
    "2025-01-22",
    "2025-01-23",
    "2025-01-24",
    "2025-01-27",
    "2025-02-05",
    "2025-02-06",
    "2025-02-07",
    "2025-02-10",
    "2025-02-11",
    "2025-02-12",
    "2025-02-13",
    "2025-02-14",
    "2025-02-17",
    "2025-02-18",
    "2025-02-19",
    "2025-02-20",
    "2025-02-21",
    "2025-02-24",
    "2025-02-25",
    "2025-02-26",
    "2025-02-27",
    "2025-02-28",
    "2025-03-03",
    "2025-03-04",
    "2025-03-05",
    "2025-03-06",
    "2025-03-07",
    "2025-03-10",
    "2025-03-11",
    "2025-03-12",
    "2025-03-13",
    "2025-03-14",
    "2025-03-17",
    "2025-03-18",
    "2025-03-19",
    "2025-03-20",
    "2025-03-21",
    "2025-03-24",
    "2025-03-25",
    "2025-03-26",
    "2025-03-27",
    "2025-03-28",
    "2025-03-31",
    "2025-04-01",
    "2025-04-02",
    "2025-04-03",
    "2025-04-07",
    "2025-04-08",
    "2025-04-09",
    "2025-04-10",
    "2025-04-11",
    "2025-04-14",
    "2025-04-15",
    "2025-04-16",
    "2025-04-17",
    "2025-04-18",
    "2025-04-21",
    "2025-04-22",
    "2025-04-23",
    "2025-04-24",
    "2025-04-25",
    "2025-04-28",
    "2025-04-29",
    "2025-04-30",
    "2025-05-06",
    "2025-05-07",
    "2025-05-08",
    "2025-05-09",
    "2025-05-12",
    "2025-05-13",
    "2025-05-14",
    "2025-05-15",
    "2025-05-16",
    "2025-05-19",
    "2025-05-20",
    "2025-05-21",
    "2025-05-22",
    "2025-05-23",
    "2025-05-26",
    "2025-05-27",
    "2025-05-28",
    "2025-05-29",
    "2025-05-30",
    "2025-06-03",
    "2025-06-04",
    "2025-06-05",
    "2025-06-06",
    "2025-06-09",
]

trading_date_list = [pd.to_datetime(date) for date in trading_date_list_str]

debug_trading_date_list_str = [
    "2025-01-03",
    "2025-01-06",
    "2025-01-07",
    "2025-01-08",
    "2025-01-09",
]

debug_trading_date_list = [pd.to_datetime(date) for date in debug_trading_date_list_str]

drop_columns = [
    "品种名称",
    "前结算价",
    "开盘价",
    "最高价",
    "最低价",
    "收盘价",
    "结算价",
    "涨跌",
    "涨跌1",
    "成交量",
    "持仓量",
    "持仓量变化",
    "成交额",
    "LastDayClosePrice",
    "OISum",
    "ATR_14",
    "EMA_7",
    "EMA_12",
    "EMA_26",
    "EMA_9",
    "EMA_21",
    "LoEvent",
    "BBandsUpper_20",
    "BBandsMiddle_20",
    "BBandsLower_20",
    "BBandsWidth",
    "BBandsBreakLow",
    "RSI_14",
    "RSILoEvent",
    "RngRel",
    "TopNet_20",
    "TopTotal_20",
    "TopNet_5",
    "TopTotal_5",
    # "ROCNext",
    "LogReturnStockIndex_0_correlation",
    # "LogReturnStockIndex_3_correlation",
    "LogReturnStockIndex_0_category",
    # "LogReturnStockIndex_3_category",
    "IsMain",
    "AggAtr",
    "RelativeToPred",
    "RelativeToMainLogDiff",
    "DEVEmaQuantile_60_20",
    "DEVEmaQuantile_60_80",
    "NumEffectiveDays_60",
    # "合约代码",
    "前收盘价",
    "MACDHist_12_26_9",
]

feature_mapping_py2r = {
    "ROC_0": "r_oc",
    "RGap": "r_gap",
    "RangeLnHL": "range_lnHL",
    "CLV": "CLV",
    "DLogVol": "d_logVol",
    "ATRRelative_14": "ATR14_rel",
    "DEVLogVol_7": "dev_logVol",
    "DEVEma_7": "dev_ema7",
    "Slope_7_14": "slope_ema7",
    "Spread_7_21": "spread_7_21",
    "HiEvent": "hi_event",
    "MACDHistNorm": "MACD_hist_norm",
    "MACDHistCrossEvent": "macd_cross_event",
    "BBandsPercentB": "BB_pctB",
    "BBandsWidthRelative": "BB_width_rel",
    "BBandsBreakHigh": "bb_break_high",
    "ADX_14": "ADX_14",
    "RSICenter": "RSI_center",
    "RSIHiEvent": "rsi_hi_event",
    "HV_15_10": "HV_15",
    "d_HV": "d_HV_15",
    "ChaikinVolatility_10": "Chaikin_Volatility",
    "OBVFlow_7": "OBV_flow",
    "Mom_10": "mom10",
    "RngMean_10": "rng10_mean",
    "DRngMean": "d_rng10_mean",
    "DomTop_20": "Dom_top20",
    "SkewTop_20": "Skew_top20",
    "DNetAtrTop_5_1": "d1Net_ATR_top5",
    "DNetAtrTop_20_5": "d5Net_ATR_top20",
    "LogReturnStockIndex_3_category": "S_ret_lag3",
    "LogReturnStockIndex_3_correlation": "E_ret_lag3",
    "Beta_60_40_category": "Beta_Sector",
    "ExRet60_category": "ExRet_Sector60",
    "Beta_60_40_correlation": "Beta_Equity",
    "ExRet60_correlation": "ExRet_Equity60",
    "BasisRate": "基差率",
    "DaysToExpiry": "DaysToExpiry",
}

other_mapping_py2r = {
    "UpDownNext": "up_dn_next",
    "ROCNext": "r_oc_next",
    "DiffAbsAtr": "diff_abs_atr",
    "IsPredicted": "IsMain",
    "label": "label",
    "weight": "weight",
}


mapping_py2r = {**feature_mapping_py2r, **other_mapping_py2r}

mapping_r2py = {v: k for k, v in mapping_py2r.items()}

model_debug_dir = "model_debug"

feature_cols = [x for x in feature_mapping_py2r.keys()]
